## Сумма элементов вектора

# Ссылка на google colab:

https://colab.research.google.com/drive/1-qNH7OvaBSDp_7ev4OYK0j9DlXxXM_CR?usp=sharing


# Описание реализации параллельной программы:
  + Подсчет размерностей грида и блока:
число потоков n - половина размерности вектора=2^n
в зависимости от этого числа выбирается число блоков в гриде, если n < 1024, то число блоков - 1.

Непосредственно сама работа функции execute_gpu:
  Вычисление размерностей грида и блока для первой итерации. Число потоков будет равно примерно половине размерности вектора.
  Циклично, пока размерность выходного вектора не равна 1: для каждого блока идет сохранение сумм значений векторов для каждого потока(в ядре в цикле for с начальным индексом равным номеру потока в гриде(индекс равен индексу исходного вектора) и с шагом равным числу потоков) и дальнейшее их сложение в единую сумму блока. Размерность выходного вектора сокращается в два раза.

# Почему было распараллелено:
Выполнение подсчета элементов на CPU предполагает последовательное сложение всех элементов вектора в цикле и сохранение в одну переменную, что 
эффективно в рамках вектора небольшой размерности. При увеличении размерности, что видно из эксперимента ниже, выигрыш параллельной программы, 
которая позволяет параллельно складывать определенные блоки значений вектора, становится заметным. 
Размерность вектора, при котором параллельная программа выполняется быстрее, чем последовательная, равна ~16000, а размерность вектора , при которой имеет смысл отдавать предпочтение параллельной программе, равняется ~32000, поскольку параллельная программа ~ в 2 раза быстрее последовательной.
Из проделанного эксперимента максимальное ускорение видно на векторе последней размерности равной 16777216 = 2^24, из чего можно сделать вывод о том, что при дальнейшем увеличении размерности вектора ускорение вырастет.
Из графиков можно увидеть, что время выполнения линейно растет с ростом размерности вектора (вычислительная сложность O(n)), в то время как зависимость времени параллельной программы от размерности вектора имеет скорее экспоненциальную зависимость.

# Таблица с данными об эксперименте.

| Размерность матриц  | Время выполнения на CPU  | Время выполнения на GPU| Ускорение |
|:------------------- |:------------------------:|:----------------------:| ---------:|
| 1024                | 0,000003                 | 0,00002                | 0,16774   |
| 2048                | 0,000006                 | 0,000023               | 0,27729   |
| 4096                | 0,000012                 | 0,000035               | 0,345284  |
| 8192                | 0,000029                 | 0,000052               | 0,567908  |
| 16384               | 0,000051                 | 0,00005                | 1,035009  |
| 32768               | 0,000101                 | 0,000045               | 2,238102  |
| 65536               | 0,000218                 | 0,000052               | 4,187636  |
| 131072              | 0,000443                 | 0,000064               | 6,908495  |
| 262144              | 0,000817                 | 0,00015                | 5,442707  |
| 524288              | 0,00165                  | 0,000366               | 4,50189   |
| 1048576             | 0,003171                 | 0,000591               | 5,362391  |
| 2097152             | 0,006204                 | 0,001058               | 5,865568  |
| 4194304             | 0,013603                 | 0,001739               | 7,822285  |
| 8388608             | 0,025485                 | 0,002104               | 12,111591 |
| 16777216            | 0,052153                 | 0,004092               | 12,746156 |

# Ссылка на графики:
https://docs.google.com/spreadsheets/d/1uEOOqOQdhnRrJ3aa4-wxrRwVxkIVey06DAuiATSeX5c/edit?usp=sharing
